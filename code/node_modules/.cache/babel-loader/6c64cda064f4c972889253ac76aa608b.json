{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/okienayonoadu/beej copy 2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./Home.css';import logo from'./beej.png';import Post from'./Post';import{db,auth}from'./firebase';import{makeStyles}from'@material-ui/core/styles';import Modal from'@material-ui/core/Modal';//import {Button} from '@material-ui/core';\nimport{Input}from'@material-ui/core';//import ImageUpload from './ImageUpload';\n//import VerifyEmail from './VerifyEmail';\nimport AccountCircleOutlinedIcon from'@material-ui/icons/AccountCircleOutlined';import EmailOutlinedIcon from'@material-ui/icons/EmailOutlined';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import BottomNavigation from'@material-ui/core/BottomNavigation';import HomeOutlinedIcon from'@material-ui/icons/HomeOutlined';import AddBoxOutlinedIcon from'@material-ui/icons/AddBoxOutlined';import NotificationsNoneOutlinedIcon from'@material-ui/icons/NotificationsNoneOutlined';import BottomNavigationAction from'@material-ui/core/BottomNavigationAction';import{Link}from'react-router-dom';import firebase from\"firebase\";import{storage}from'./firebase';import'./ImageUpload.css';import InputLabel from'@material-ui/core/InputLabel';import MenuItem from'@material-ui/core/MenuItem';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';//import Button from '@material-ui/core/Button';\n/*Styling for modal. Code from material-ui.com*/function getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}var useStyles=makeStyles(function(theme){return{paper:{position:'absolute',width:400,backgroundColor:theme.palette.background.paper,border:'2px solid #000',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});function Home(){/*states...how you set variables in react*/var classes=useStyles();// getModalStyle is not a pure function, we roll the style only on the first render\nvar _useState=useState(getModalStyle),_useState2=_slicedToArray(_useState,1),modalStyle=_useState2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),openSignIn=_useState8[0],setOpenSignIn=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),openAdmin=_useState10[0],setOpenAdmin=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),username=_useState12[0],setUsername=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),password=_useState14[0],setPassword=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),email=_useState16[0],setEmail=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),user=_useState18[0],setUser=_useState18[1];//state to keep track of the user\n//IMAGE UPLOAD STATES\nvar _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),openP=_useState20[0],setOpenP=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),caption=_useState22[0],setCaption=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),image=_useState24[0],setImage=_useState24[1];//state for the progress bar\nvar _useState25=useState(0),_useState26=_slicedToArray(_useState25,2),progress=_useState26[0],setProgress=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),openProgress=_useState28[0],setOpenProgress=_useState28[1];//progress bar state\nvar _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),keyword=_React$useState2[0],setKeyword=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),openDropDown=_React$useState4[0],setOpenDropDown=_React$useState4[1];var handleChangeDropDown=function handleChangeDropDown(event){setKeyword(event.target.value);};var handleCloseDropDown=function handleCloseDropDown(){setOpenDropDown(false);};var handleOpenDropDown=function handleOpenDropDown(){setOpenDropDown(true);};//imageupload functions\nvar handleChange=function handleChange(e){//handleChange function fires off an event\nif(e.target.files[0]){//get the first file you selected\nsetImage(e.target.files[0]);//set the image in state to that file\n}};var handleUpload=function handleUpload(event){event.preventDefault();//avoid refresh when upload button is clicked\n//access the storage in firebase, get a references to the folder images/ and store image there\nvar uploadTask=storage.ref(\"images/\".concat(image.name)).put(image);uploadTask.on(\"state_changed\",/*provide snapshot of the image uploading progress via an equation*/function(snapshot){//progress function ...\nvar progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);setProgress(progress);},function(error){//error function ..\nconsole.log(error);alert(error.message);},function(){// complete function ...\nstorage.ref(\"images\").child(image.name).getDownloadURL()//GET DOWNLOAD LINK TO THE IMAGE\n.then(function(url){//post image inside db\ndb.collection(\"posts\").add({//get server timestamp so images are sorted by time posted\ntimestamp:firebase.firestore.FieldValue.serverTimestamp(),caption:caption,imageUrl:url,username:user.displayName,keyword:keyword});setProgress(0);//reset progress\nsetCaption(\"\");setImage(null);setKeyword(\"\");});});setOpenP(false);//close modal after upload\nsetOpenProgress(true);//open progress modal\nsetOpenProgress(false);//never mind, dont show progress bar modal\n};useEffect(function(){var unsubscribe=auth.onAuthStateChanged(function(authUser){//listen anytime an authentication change happens\nif(authUser){//user has logged in...\nconsole.log(authUser);//check the console if someone is there or not\nsetUser(authUser);//Cookie tracking to keep you logged in. Captures the user in our state. \nif(authUser.displayName){//dont update username if they dont have a display name\n}else{// if we just created someone...\nreturn authUser.updateProfile({displayName:username//set their display name in firebase\n});}}else{// user has logged out...\nsetUser(null);}});return function(){//perform some cleanup actions before restarting the useEffect. This to avoid duplicate listeners.\nunsubscribe();};},[user,username]);//useEffect runs a piece of code based on a specific condition\nuseEffect(function(){//this is where the code runs\n//snapshot is a powerful listener that will run the code when a post is made\ndb.collection('posts').orderBy('timestamp','desc').onSnapshot(function(snapshot){//everytime a new post is added, this code fires...\nsetPosts(snapshot.docs.map(function(doc){return{id:doc.id,//the post ids\npost:doc.data()};}));});},[]);//[] symbol means run the code once\n//sign up function. Fired up by the button\nvar signUp=function signUp(event){event.preventDefault();//avoid refresh when sign up button is clicked\n//verify email\nauth.onAuthStateChanged(function(firebaseUser){if(firebaseUser){firebaseUser.sendEmailVerification().then(function(){// Email sent.\n//alert(\"Your email verification code has been sent\")\n},function(error){// An error happened.\nalert(error.message);});}else{}});auth.createUserWithEmailAndPassword(email,password)//create user\n.then(function(authUser){return authUser.user.updateProfile({displayName:username});})//backend validation is done by firebase\n.catch(function(error){return alert(error.message);});//alert of any errors with a message\nsetOpen(false);//close modal after signing up\n};//sign in function. Fired up by the button\nvar signIn=function signIn(event){event.preventDefault();//avoid refresh when sign in button is clicked\nauth.signInWithEmailAndPassword(email,password)//backend validation is done by firebase\n.catch(function(error){return alert(error.message);});//alert of any errors with a message\nsetOpenSignIn(false);//close modal after signing in\n};var myFunction=function myFunction(event){event.preventDefault();//avoid refresh when sign up button is clicked\nvar passcode=document.getElementById(\"pass\").value;passcode==70321?window.location=\"/AdminPage\":alert(\"Incorrect passcode\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Modal//Sign up Modal\n,{open:open//state to keep track if its open\n,onClose:function onClose(){return setOpen(false);}//onClose method. closes the model when anywhere else on the screen is clicked\n,children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{className:\"app__signup\",children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"50px\",height:\"50px\"})}),/*#__PURE__*/_jsx(AccountCircleOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"username\",type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(EmailOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"email\",type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(LockOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:signUp,children:\"Sign Up\"})]})})}),/*#__PURE__*/_jsx(Modal//Sign Out and Login Modal\n,{open:openSignIn//state to keep track if its open\n,onClose:function onClose(){return setOpenSignIn(false);}//onClose method. closes the model when anywhere else on the screen is clicked\n,children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{className:\"app__signup\",children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"100px\",height:\"100px\"})}),/*#__PURE__*/_jsx(EmailOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"email\",type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(LockOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:signIn,children:\"Sign In\"})]})})}),/*#__PURE__*/_jsx(Modal//Sign Out and Login Modal\n,{open:openAdmin//state to keep track if its open\n,onClose:function onClose(){return setOpenAdmin(false);}//onClose method. closes the model when anywhere else on the screen is clicked\n,children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{className:\"app__signup\",children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"100px\",height:\"100px\"})}),/*#__PURE__*/_jsx(LockOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"Authorization Code\",id:\"pass\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:myFunction,children:\"Submit\"})]})})}),/*#__PURE__*/_jsx(Modal,{open:openP//state to keep track if its open\n,onClose:function onClose(){return setOpenP(false);}//onClose method. closes the model when anywhere else on the screen is clicked\n,children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"div\",{className:\"imageupload\",children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"50px\",height:\"50px\"})}),/*#__PURE__*/_jsxs(FormControl,{className:classes.formControl,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-controlled-open-select-label\",children:\"Choose a keyword\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"demo-controlled-open-select-label\",id:\"demo-controlled-open-select\",open:openDropDown,onClose:handleCloseDropDown,onOpen:handleOpenDropDown,value:keyword,onChange:handleChangeDropDown,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:/*#__PURE__*/_jsx(\"em\",{children:\"--Choose a keyword--\"})}),/*#__PURE__*/_jsx(MenuItem,{value:\"Pothole\",children:\"Pothole\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Water Spill\",children:\"Water Spill\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Sinkhole\",children:\"Sinkhole\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter a caption...\",onChange:function onChange(event){return setCaption(event.target.value);},value:caption}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,children:\"Upload\"})]})})}),/*#__PURE__*/_jsx(Modal,{open:openProgress//state to keep track if its open\n,onClose:function onClose(){return setOpenProgress(false);}//onClose method. closes the model when anywhere else on the screen is clicked\n,children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsx(\"progress\",{className:\"imageupload__progress\",value:progress,max:\"100\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"app__header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"60px\",height:\"60px\"}),(user===null||user===void 0?void 0:user.displayName)?/*#__PURE__*/ //if the user exists, show a Logout button\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpenAdmin(true);},children:\"Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return auth.signOut();},children:\"Logout\"})]}):/*#__PURE__*/ //else, show a sign up button\n_jsxs(\"div\",{className:\"app__loginContainer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpenSignIn(true);},children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpen(true);},children:\"Sign Up\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"app__posts\",children:/*#__PURE__*/_jsx(\"div\",{className:\"app_postsRight\",children:/*loop through posts in state*/posts.map(function(_ref){var id=_ref.id,post=_ref.post;return/*#__PURE__*/ (//the key allows the page to only refresh the new post, not all the posts. since each post has its own key\n_jsx(Post,{postId:id,user:user,username:post.username,caption:post.caption,imageUrl:post.imageUrl,keyword:post.keyword},id));})})}),(user===null||user===void 0?void 0:user.displayName)?/*#__PURE__*/ //access only when user is signed in\n_jsx(\"div\",{className:\"app__bottom\",children:/*#__PURE__*/_jsxs(BottomNavigation// showLabels\n// className={classes.root}\n,{children:[/*#__PURE__*/_jsx(BottomNavigationAction,{label:\"Home\",icon:/*#__PURE__*/_jsx(HomeOutlinedIcon,{}),component:Link,to:\"/\"}),/*#__PURE__*/_jsx(BottomNavigationAction,{label:\"Post\",icon:/*#__PURE__*/_jsx(AddBoxOutlinedIcon,{}),component:Link,onClick:function onClick(){return setOpenP(true);}}),/*#__PURE__*/_jsx(BottomNavigationAction,{label:\"Nav\",icon:/*#__PURE__*/_jsx(NotificationsNoneOutlinedIcon,{}),component:Link}),/*#__PURE__*/_jsx(BottomNavigationAction,{label:\"Profile\",icon:/*#__PURE__*/_jsx(AccountCircleOutlinedIcon,{}),component:Link,to:\"/UserProfile\"})]})}):/*#__PURE__*/_jsx(\"h7\",{})//hide navigation bar when user is not signed in\n]});}export default Home;","map":{"version":3,"sources":["/Users/okienayonoadu/beej copy 2/src/Home.js"],"names":["React","useState","useEffect","logo","Post","db","auth","makeStyles","Modal","Input","AccountCircleOutlinedIcon","EmailOutlinedIcon","LockOutlinedIcon","BottomNavigation","HomeOutlinedIcon","AddBoxOutlinedIcon","NotificationsNoneOutlinedIcon","BottomNavigationAction","Link","firebase","storage","InputLabel","MenuItem","FormControl","Select","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","Home","classes","modalStyle","posts","setPosts","open","setOpen","openSignIn","setOpenSignIn","openAdmin","setOpenAdmin","username","setUsername","password","setPassword","email","setEmail","user","setUser","openP","setOpenP","caption","setCaption","image","setImage","progress","setProgress","openProgress","setOpenProgress","keyword","setKeyword","openDropDown","setOpenDropDown","handleChangeDropDown","event","target","value","handleCloseDropDown","handleOpenDropDown","handleChange","e","files","handleUpload","preventDefault","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","timestamp","firestore","FieldValue","serverTimestamp","imageUrl","displayName","unsubscribe","onAuthStateChanged","authUser","updateProfile","orderBy","onSnapshot","docs","map","doc","id","post","data","signUp","firebaseUser","sendEmailVerification","createUserWithEmailAndPassword","catch","signIn","signInWithEmailAndPassword","myFunction","passcode","document","getElementById","window","location","formControl","signOut"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport './Home.css';\nimport logo from './beej.png';\nimport Post from './Post';\nimport {db, auth} from './firebase';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\n//import {Button} from '@material-ui/core';\nimport {Input} from '@material-ui/core';\n//import ImageUpload from './ImageUpload';\n//import VerifyEmail from './VerifyEmail';\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\nimport EmailOutlinedIcon from '@material-ui/icons/EmailOutlined';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\n\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport HomeOutlinedIcon from '@material-ui/icons/HomeOutlined';\nimport AddBoxOutlinedIcon from '@material-ui/icons/AddBoxOutlined';\nimport NotificationsNoneOutlinedIcon from '@material-ui/icons/NotificationsNoneOutlined';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\n\nimport {Link} from 'react-router-dom';\n\nimport firebase from \"firebase\";\nimport {storage} from './firebase';\nimport './ImageUpload.css';\n\n\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n//import Button from '@material-ui/core/Button';\n\n\n\n\n/*Styling for modal. Code from material-ui.com*/\nfunction getModalStyle() {\n  const top = 50\n  const left = 50\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\n\n\nfunction Home() {\n/*states...how you set variables in react*/\nconst classes = useStyles();\n// getModalStyle is not a pure function, we roll the style only on the first render\nconst [modalStyle] = useState(getModalStyle);\n\nconst [posts, setPosts] = useState([]);\nconst [open,setOpen] = useState(false);\nconst [openSignIn, setOpenSignIn] = useState(false);\nconst [openAdmin, setOpenAdmin] = useState(false);\nconst [username,setUsername] = useState('');\nconst [password,setPassword] = useState('');\nconst [email,setEmail] = useState('');\nconst [user,setUser] = useState(null); //state to keep track of the user\n\n\n//IMAGE UPLOAD STATES\nconst [openP,setOpenP] = useState(false);\nconst [caption, setCaption] = useState('');\nconst [image, setImage] = useState(null); //state for the progress bar\n\nconst [progress, setProgress] = useState(0);\nconst [openProgress,setOpenProgress] = useState(false);  //progress bar state\n\nconst [keyword, setKeyword] = React.useState('');\n  const [openDropDown, setOpenDropDown] = React.useState(false);\n\n  const handleChangeDropDown = (event) => {\n    setKeyword(event.target.value);\n  };\n\n  const handleCloseDropDown = () => {\n    setOpenDropDown(false);\n  };\n\n  const handleOpenDropDown = () => {\n    setOpenDropDown(true);\n  };\n\n\n//imageupload functions\nconst handleChange =  (e) => {//handleChange function fires off an event\n  if (e.target.files[0]) { //get the first file you selected\n      setImage(e.target.files[0]); //set the image in state to that file\n  }\n};\n\n\n\n\n  const handleUpload = (event) => {\n  event.preventDefault(); //avoid refresh when upload button is clicked\n\n  //access the storage in firebase, get a references to the folder images/ and store image there\n\n   const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    \n    uploadTask.on(\n      \"state_changed\",\n      /*provide snapshot of the image uploading progress via an equation*/\n       (snapshot) => {\n          //progress function ...\n          const progress = Math.round(\n              (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          );\n          setProgress(progress);\n      },\n      (error) => {\n          //error function ..\n          console.log(error);\n          alert(error.message);\n      }, \n      () => {\n          // complete function ...\n          storage\n              .ref(\"images\")\n              .child(image.name)\n              .getDownloadURL()   //GET DOWNLOAD LINK TO THE IMAGE\n              .then(url => {\n                  //post image inside db\n                  db.collection(\"posts\").add({\n                      //get server timestamp so images are sorted by time posted\n                      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n                      caption: caption,\n                      imageUrl: url,\n                      username: user.displayName,\n                      keyword: keyword\n                  });\n\n                  setProgress(0); //reset progress\n                  setCaption(\"\");\n                  setImage(null);\n                  setKeyword(\"\");\n              });\n      }\n  );\n\n \n setOpenP(false); //close modal after upload\n setOpenProgress(true); //open progress modal\n setOpenProgress(false); //never mind, dont show progress bar modal\n\n\n};\n\n\n\n\n\nuseEffect(() => {\n  \n    const unsubscribe = auth.onAuthStateChanged((authUser) => { //listen anytime an authentication change happens\n      if (authUser) {\n        //user has logged in...\n        console.log(authUser);  //check the console if someone is there or not\n        setUser(authUser); //Cookie tracking to keep you logged in. Captures the user in our state. \n\n        if (authUser.displayName) {\n          //dont update username if they dont have a display name\n        } else {\n          // if we just created someone...\n          return authUser.updateProfile({\n            displayName: username, //set their display name in firebase\n        });\n        }\n\n      } else {\n        // user has logged out...\n        setUser(null);\n      }\n    })\n\n    return () => {\n      //perform some cleanup actions before restarting the useEffect. This to avoid duplicate listeners.\n      unsubscribe ();\n    }\n},\n [user, username]);\n\n//useEffect runs a piece of code based on a specific condition\n useEffect(() => {\n  //this is where the code runs\n  //snapshot is a powerful listener that will run the code when a post is made\n  db.collection('posts').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n    //everytime a new post is added, this code fires...\n    setPosts(snapshot.docs.map(doc => ({\n      id: doc.id, //the post ids\n      post: doc.data()\n    })));\n  })\n}, []); //[] symbol means run the code once\n\n//sign up function. Fired up by the button\nconst signUp = (event) => {\n  event.preventDefault(); //avoid refresh when sign up button is clicked\n\n  //verify email\n  auth.onAuthStateChanged(function (firebaseUser) {\n    if (firebaseUser) {\n      firebaseUser.sendEmailVerification().then(function() {\n        // Email sent.\n        //alert(\"Your email verification code has been sent\")\n      }, function(error) {\n        // An error happened.\n       alert(error.message)\n      })\n\n    } else {\n      \n    }\n});\n\nauth\n    .createUserWithEmailAndPassword(email, password)  //create user\n    .then((authUser) => {\n    return authUser.user.updateProfile({\n    displayName: username\n    })  \n  }\n\n  )\n  //backend validation is done by firebase\n  .catch((error) => alert(error.message)) //alert of any errors with a message\n\n  setOpen(false); //close modal after signing up\n\n  \n}\n\n\n//sign in function. Fired up by the button\nconst signIn = (event) => {\n  event.preventDefault(); //avoid refresh when sign in button is clicked\n\n  \n  auth\n  .signInWithEmailAndPassword(email, password)\n  //backend validation is done by firebase\n  .catch((error) => alert(error.message)) //alert of any errors with a message\n  \n  setOpenSignIn(false); //close modal after signing in\n}\n\n\nconst myFunction = (event)=>{\n  event.preventDefault(); //avoid refresh when sign up button is clicked\n\n  var passcode = document.getElementById(\"pass\").value;\n  (passcode == 70321) ? window.location = \"/AdminPage\" : alert(\"Incorrect passcode\")\n}\n  return (\n    <div className=\"app\">\n      {/*using BEM naming convetion*/}\n\n{/* \n      {user?.displayName ?(//access only when user is signed in\n        <ImageUpload username={user.displayName} />\n      ):\n      (\n          <h7>Sorry you need to login to upload</h7>\n      )} \n */}\n\n\n\n      <Modal //Sign up Modal\n        open = {open} //state to keep track if its open\n        onClose={() => setOpen(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className= \"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"50px\"\n                height=\"50px\"\n              />\n            </center>\n            \n            <AccountCircleOutlinedIcon/>\n            <Input \n                placeholder = \"username\"\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n              />\n              <EmailOutlinedIcon/>\n              <Input \n                placeholder = \"email\"\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n              <LockOutlinedIcon/>\n              <Input \n                placeholder = \"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              <button type=\"submit\" onClick={signUp}>Sign Up</button>\n              \n          </form>\n        </div>\n      </Modal>\n  \n\n      <Modal //Sign Out and Login Modal\n        open = {openSignIn} //state to keep track if its open\n        onClose={() => setOpenSignIn(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className= \"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"100px\"\n                height=\"100px\"\n              />\n            </center>\n            \n            <EmailOutlinedIcon/>\n              <Input \n                placeholder = \"email\"\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n              \n              <LockOutlinedIcon/>\n              <Input \n                placeholder = \"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              \n              <button type=\"submit\" onClick={signIn}>Sign In</button>\n              \n          </form>\n        </div>\n      </Modal>\n\n\n{/* modal for admin*/}\n\n      <Modal //Sign Out and Login Modal\n        open = {openAdmin} //state to keep track if its open\n        onClose={() => setOpenAdmin(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className= \"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"100px\"\n                height=\"100px\"\n              />\n            </center>\n            \n          \n              <LockOutlinedIcon/>\n              <Input \n                placeholder = \"Authorization Code\"\n                id=\"pass\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              \n              <button type=\"submit\" onClick={myFunction}>Submit</button>\n          </form>\n        </div>\n      </Modal>\n\n\n\n{/* modal for posting*/}\n<Modal \n        open = {openP} //state to keep track if its open\n        onClose={() => setOpenP(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n        <div className=\"imageupload\">\n         \n         \n         \n        <center>\n            <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"50px\"\n                height=\"50px\"\n              />\n            </center>\n            <FormControl className={classes.formControl}>\n            \n\n        <InputLabel id=\"demo-controlled-open-select-label\">Choose a keyword</InputLabel>\n        <Select\n          labelId=\"demo-controlled-open-select-label\"\n          id=\"demo-controlled-open-select\"\n          open={openDropDown}\n          onClose={handleCloseDropDown}\n          onOpen={handleOpenDropDown}\n          value={keyword}\n          onChange={handleChangeDropDown}\n        >\n          <MenuItem value=\"\">\n            <em>--Choose a keyword--</em>\n          </MenuItem>\n          <MenuItem value={\"Pothole\"}>Pothole</MenuItem>\n          <MenuItem value={\"Water Spill\"}>Water Spill</MenuItem>\n          <MenuItem value={\"Sinkhole\"}>Sinkhole</MenuItem>\n        </Select>\n      </FormControl>\n \n\n           <input type=\"text\" placeholder='Enter a caption...' onChange={event => setCaption(event.target.value)} value={caption}/>\n           <input type=\"file\" onChange={handleChange} />\n\n           <button onClick={handleUpload}>\n            Upload\n           </button>\n        </div>\n        </div>\n        \n      </Modal>\n\n      <Modal \n        open = {openProgress} //state to keep track if its open\n        onClose={() => setOpenProgress(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n      <progress className=\"imageupload__progress\" value={progress} max=\"100\"/>\n      </div>\n      \n      </Modal>\n\n\n\n\n\n      <div className=\"app__header\">\n        \n       \n\n        <img\n        \n          className=\"app__headerImage\"\n          src={logo}\n          alt=\"\"\n          width=\"60px\"\n          height=\"60px\"\n          />\n\n\n \n\n\n{/**********************************************NEWWWWWWWWW***********************************************************************/}\n\n\n        {user?.displayName? ( //if the user exists, show a Logout button\n        <div>\n          {/* <button>Are you an Admin??</button> */}\n          <button onClick={() => setOpenAdmin(true)}>Admin</button>\n         <button onClick={() => auth.signOut()}>Logout</button>\n        </div>\n      ):  ( //else, show a sign up button\n          <div className=\"app__loginContainer\">\n            \n        <button onClick={() => setOpenSignIn(true)}>Sign In</button>\n        <button onClick={() => setOpen(true)}>Sign Up</button>\n        </div>\n      )}\n        </div>\n\n      \n      <div className=\"app__posts\">\n        <div className= \"app_postsRight\">\n\n\n\n\n      {/*Posts*/}\n      {\n        /*loop through posts in state*/\n        posts.map(({id, post}) => (\n          //the key allows the page to only refresh the new post, not all the posts. since each post has its own key\n         <Post key={id} postId={id} user= {user} username={post.username} caption={post.caption} imageUrl={post.imageUrl} keyword={post.keyword}></Post>\n        ))\n        }\n      </div>\n      </div>\n        \n\n\n\n\n\n\n\n\n\n\n\n\n{user?.displayName ?(//access only when user is signed in\n\n \n      <div className=\"app__bottom\">\n      <BottomNavigation\n       // showLabels\n       // className={classes.root}\n        \n      >\n  <BottomNavigationAction label=\"Home\" icon={<HomeOutlinedIcon />} component={Link} to=\"/\" />\n  <BottomNavigationAction label=\"Post\" icon={<AddBoxOutlinedIcon />} component={Link} onClick={() => setOpenP(true)}/>\n  <BottomNavigationAction label=\"Nav\" icon={<NotificationsNoneOutlinedIcon />} component={Link}/>\n  <BottomNavigationAction label=\"Profile\" icon={<AccountCircleOutlinedIcon />} component={Link} to=\"/UserProfile\"/>\n\n</BottomNavigation>\n</div>\n     ):\n     (\n        <h7></h7> //hide navigation bar when user is not signed in\n    )}\n     \n\n    </div>\n  );\n\n\n\n  \n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}