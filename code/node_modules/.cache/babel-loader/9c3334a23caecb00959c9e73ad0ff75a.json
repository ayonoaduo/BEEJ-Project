{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/okienayonoadu/beej copy 2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toArray from\"/Users/okienayonoadu/beej copy 2/node_modules/@babel/runtime/helpers/esm/toArray\";import React,{useState,useEffect}from'react';import'./Home.css';import logo from'./beej.png';import Post2 from'./Post2';import{db,auth}from'./firebase';import AccountCircleOutlinedIcon from'@material-ui/icons/AccountCircleOutlined';import BottomNavigation from'@material-ui/core/BottomNavigation';import HomeOutlinedIcon from'@material-ui/icons/HomeOutlined';import BottomNavigationAction from'@material-ui/core/BottomNavigationAction';import DescriptionOutlinedIcon from'@material-ui/icons/DescriptionOutlined';import{Link}from'react-router-dom';import'./ImageUpload.css';/*Styling for modal. Code from material-ui.com*/function getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}function AdminPage(){/*states...how you set variables in react*/ // getModalStyle is not a pure function, we roll the style only on the first render\nvar _useState=useState(getModalStyle),_useState2=_toArray(_useState);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,1),username=_useState6[0];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];//state to keep track of the user\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),open=_useState10[0],setOpen=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),openSignIn=_useState12[0],setOpenSignIn=_useState12[1];//imageupload functions\nuseEffect(function(){var unsubscribe=auth.onAuthStateChanged(function(authUser){//listen anytime an authentication change happens\nif(authUser){//user has logged in...\nconsole.log(authUser);//check the console if someone is there or not\nsetUser(authUser);//Cookie tracking to keep you logged in. Captures the user in our state. \nif(authUser.displayName){//dont update username if they dont have a display name\n}else{// if we just created someone...\nreturn authUser.updateProfile({displayName:username//set their display name in firebase\n});}}else{// user has logged out...\nsetUser(null);}});return function(){//perform some cleanup actions before restarting the useEffect. This to avoid duplicate listeners.\nunsubscribe();};},[user,username]);//useEffect runs a piece of code based on a specific condition\nuseEffect(function(){//this is where the code runs\n//snapshot is a powerful listener that will run the code when a post is made\ndb.collection('posts').orderBy('timestamp','desc').onSnapshot(function(snapshot){//everytime a new post is added, this code fires...\nsetPosts(snapshot.docs.map(function(doc){return{id:doc.id,//the post ids\npost:doc.data()};}));});},[]);//[] symbol means run the code once\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"app__header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"60px\",height:\"60px\"}),(user===null||user===void 0?void 0:user.displayName)?/*#__PURE__*/ //if the user exists, show a Logout button\n_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return auth.signOut();},children:\"Logout\"})}):/*#__PURE__*/ //else, show a sign up button\n_jsxs(\"div\",{className:\"app__loginContainer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpenSignIn(true);},children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpen(true);},children:\"Sign Up\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"app__posts\",children:/*#__PURE__*/_jsx(\"div\",{className:\"app_postsRight\",children:/*loop through posts in state*/posts.map(function(_ref){var id=_ref.id,post=_ref.post;return/*#__PURE__*/ (//the key allows the page to only refresh the new post, not all the posts. since each post has its own key\n_jsx(Post2,{postId:id,user:user,username:post.username,caption:post.caption,imageUrl:post.imageUrl,keyword:post.keyword},id));})})}),(user===null||user===void 0?void 0:user.displayName)?/*#__PURE__*/ //access only when user is signed in\n_jsx(\"div\",{className:\"app__bottom\",children:/*#__PURE__*/_jsxs(BottomNavigation,{children:[/*#__PURE__*/_jsx(BottomNavigationAction,{label:\"Home\",icon:/*#__PURE__*/_jsx(HomeOutlinedIcon,{}),component:Link,to:\"/AdminPage\"}),/*#__PURE__*/_jsx(BottomNavigationAction,{label:\"New Reports\",icon:/*#__PURE__*/_jsx(DescriptionOutlinedIcon,{}),component:Link,to:\"/\"}),/*#__PURE__*/_jsx(BottomNavigationAction,{label:\"Profile\",icon:/*#__PURE__*/_jsx(AccountCircleOutlinedIcon,{}),component:Link,to:\"/UserProfile\"})]})}):/*#__PURE__*/_jsx(\"h7\",{})//hide navigation bar when user is not signed in\n]});}export default AdminPage;","map":{"version":3,"sources":["/Users/okienayonoadu/beej copy 2/src/AdminPage.js"],"names":["React","useState","useEffect","logo","Post2","db","auth","AccountCircleOutlinedIcon","BottomNavigation","HomeOutlinedIcon","BottomNavigationAction","DescriptionOutlinedIcon","Link","getModalStyle","top","left","transform","AdminPage","posts","setPosts","username","user","setUser","open","setOpen","openSignIn","setOpenSignIn","unsubscribe","onAuthStateChanged","authUser","console","log","displayName","updateProfile","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","post","data","signOut","caption","imageUrl","keyword"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport './Home.css';\nimport logo from './beej.png';\nimport Post2 from './Post2';\nimport {db, auth} from './firebase';\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport HomeOutlinedIcon from '@material-ui/icons/HomeOutlined';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\n\nimport {Link} from 'react-router-dom';\nimport './ImageUpload.css';\n\n\n/*Styling for modal. Code from material-ui.com*/\nfunction getModalStyle() {\n  const top = 50\n  const left = 50\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\n\n\nfunction AdminPage() {\n   /*states...how you set variables in react*/\n   // getModalStyle is not a pure function, we roll the style only on the first render\n   const [] = useState(getModalStyle);\n\n   const [posts, setPosts] = useState([]);\n   const [username] = useState('');\n   const [user,setUser] = useState(null); //state to keep track of the user\n\n   const [open,setOpen] = useState(false);\n   const [openSignIn, setOpenSignIn] = useState(false);\n   //imageupload functions\n\n\n   useEffect(() => {\n   \n      const unsubscribe = auth.onAuthStateChanged((authUser) => { //listen anytime an authentication change happens\n         if (authUser) {\n         //user has logged in...\n         console.log(authUser);  //check the console if someone is there or not\n         setUser(authUser); //Cookie tracking to keep you logged in. Captures the user in our state. \n\n         if (authUser.displayName) {\n            //dont update username if they dont have a display name\n         } else {\n            // if we just created someone...\n            return authUser.updateProfile({\n               displayName: username, //set their display name in firebase\n         });\n         }\n\n         } else {\n         // user has logged out...\n         setUser(null);\n         }\n      })\n\n      return () => {\n         //perform some cleanup actions before restarting the useEffect. This to avoid duplicate listeners.\n         unsubscribe ();\n      }\n   },[user, username]);\n\n   //useEffect runs a piece of code based on a specific condition\n   useEffect(() => {\n      //this is where the code runs\n      //snapshot is a powerful listener that will run the code when a post is made\n      db.collection('posts').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n         //everytime a new post is added, this code fires...\n         setPosts(snapshot.docs.map(doc => ({\n            id: doc.id, //the post ids\n            post: doc.data()\n         })));\n      })\n   }, []); //[] symbol means run the code once\n\n  return (\n    <div className=\"app\">\n      {/*using BEM naming convetion*/}\n\n      <div className=\"app__header\">\n\n        <img\n          className=\"app__headerImage\"\n          src={logo}\n          alt=\"\"\n          width=\"60px\"\n          height=\"60px\"\n          />\n\n{/**********************************************NEWWWWWWWWW***********************************************************************/}\n\n\n        {user?.displayName? ( //if the user exists, show a Logout button\n        <div>\n         <button onClick={() => auth.signOut()}>Logout</button>\n        </div>\n      ):  ( //else, show a sign up button\n          <div className=\"app__loginContainer\">\n            \n        <button onClick={() => setOpenSignIn(true)}>Sign In</button>\n        <button onClick={() => setOpen(true)}>Sign Up</button>\n        </div>\n      )}\n        </div>\n\n      \n      <div className=\"app__posts\">\n        <div className= \"app_postsRight\">\n\n\n\n\n      {/*Posts*/}\n      {\n        /*loop through posts in state*/\n        posts.map(({id, post}) => (\n          //the key allows the page to only refresh the new post, not all the posts. since each post has its own key\n         <Post2 key={id} postId={id} user= {user} username={post.username} caption={post.caption} imageUrl={post.imageUrl} keyword={post.keyword}></Post2>\n        ))\n        }\n      </div>\n      </div>\n        \n\n\n   {user?.displayName ?(//access only when user is signed in\n\n      <div className=\"app__bottom\">\n         <BottomNavigation>\n            <BottomNavigationAction label=\"Home\" icon={<HomeOutlinedIcon />} component={Link} to=\"/AdminPage\" />\n            <BottomNavigationAction label=\"New Reports\" icon={<DescriptionOutlinedIcon />} component={Link} to=\"/\"/>\n            <BottomNavigationAction label=\"Profile\" icon={<AccountCircleOutlinedIcon />} component={Link} to=\"/UserProfile\"/>\n         </BottomNavigation>\n      </div>\n      ):\n      (\n         <h7></h7> //hide navigation bar when user is not signed in\n      )}\n      \n\n      </div>\n  );\n\n\n\n  \n}\n\nexport default AdminPage;"]},"metadata":{},"sourceType":"module"}