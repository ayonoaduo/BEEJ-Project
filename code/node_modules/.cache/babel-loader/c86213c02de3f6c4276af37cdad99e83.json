{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/okienayonoadu/beej/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./App.css';import logo from'./beej.png';import Post from'./Post';import{db,auth}from'./firebase';import{makeStyles}from'@material-ui/core/styles';import Modal from'@material-ui/core/Modal';//import {Button} from '@material-ui/core';\nimport{Input}from'@material-ui/core';import ImageUpload from'./ImageUpload';//import VerifyEmail from './VerifyEmail';\nimport AccountCircleOutlinedIcon from'@material-ui/icons/AccountCircleOutlined';import EmailOutlinedIcon from'@material-ui/icons/EmailOutlined';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';/*Styling for modal. Code from material-ui.com*/function getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}var useStyles=makeStyles(function(theme){return{paper:{position:'absolute',width:400,backgroundColor:theme.palette.background.paper,border:'2px solid #000',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});function App(){/*states...how you set variables in react*/var classes=useStyles();// getModalStyle is not a pure function, we roll the style only on the first render\nvar _useState=useState(getModalStyle),_useState2=_slicedToArray(_useState,1),modalStyle=_useState2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),openSignIn=_useState8[0],setOpenSignIn=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),username=_useState10[0],setUsername=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),email=_useState14[0],setEmail=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),user=_useState16[0],setUser=_useState16[1];//state to keep track of the user\nuseEffect(function(){var unsubscribe=auth.onAuthStateChanged(function(authUser){//listen anytime an authentication change happens\nif(authUser){//user has logged in...\nconsole.log(authUser);//check the console if someone is there or not\nsetUser(authUser);//Cookie tracking to keep you logged in. Captures the user in our state. \nif(authUser.displayName){//dont update username if they dont have a display name\n}else{// if we just created someone...\nreturn authUser.updateProfile({displayName:username//set their display name in firebase\n});}}else{// user has logged out...\nsetUser(null);}});return function(){//perform some cleanup actions before restarting the useEffect. This to avoid duplicate listeners.\nunsubscribe();};},[user,username]);//useEffect runs a piece of code based on a specific condition\nuseEffect(function(){//this is where the code runs\n//snapshot is a powerful listener that will run the code when a post is made\ndb.collection('posts').onSnapshot(function(snapshot){//everytime a new post is added, this code fires...\nsetPosts(snapshot.docs.map(function(doc){return{id:doc.id,//the post ids\npost:doc.data()};}));});},[]);//[] symbol means run the code once\n//sign up function. Fired up by the button\nvar signUp=function signUp(event){event.preventDefault();//avoid refresh when sign up button is clicked\n//verify email\nauth.onAuthStateChanged(function(firebaseUser){if(firebaseUser){firebaseUser.sendEmailVerification().then(function(){// Email sent.\n//alert(\"Your email verification code has been sent\")\n},function(error){// An error happened.\nalert(error.message);});}else{}});auth.createUserWithEmailAndPassword(email,password)//create user\n.then(function(authUser){return authUser.user.updateProfile({displayName:username});})//backend validation is done by firebase\n.catch(function(error){return alert(error.message);});//alert of any errors with a message\nsetOpen(false);//close modal after signing up\n};//sign in function. Fired up by the button\nvar signIn=function signIn(event){event.preventDefault();//avoid refresh when sign in button is clicked\nauth.signInWithEmailAndPassword(email,password)//backend validation is done by firebase\n.catch(function(error){return alert(error.message);});//alert of any errors with a message\nsetOpenSignIn(false);//close modal after signing in\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Modal//Sign up Modal\n,{open:open//state to keep track if its open\n,onClose:function onClose(){return setOpen(false);}//onClose method. closes the model when anywhere else on the screen is clicked\n,children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{className:\"app__signup\",children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"50px\",height:\"50px\"})}),/*#__PURE__*/_jsx(AccountCircleOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"username\",type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(EmailOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"email\",type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(LockOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:signUp,children:\"Sign Up\"})]})})}),/*#__PURE__*/_jsx(Modal//Sign Out and Login Modal\n,{open:openSignIn//state to keep track if its open\n,onClose:function onClose(){return setOpenSignIn(false);}//onClose method. closes the model when anywhere else on the screen is clicked\n,children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{className:\"app__signup\",children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"50px\",height:\"50px\"})}),/*#__PURE__*/_jsx(EmailOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"email\",type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(LockOutlinedIcon,{}),/*#__PURE__*/_jsx(Input,{placeholder:\"password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:signIn,children:\"Sign In\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"app__header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"50px\",height:\"50px\"}),(user===null||user===void 0?void 0:user.displayName)?/*#__PURE__*/ //if the user exists, show a Logout button\n_jsx(\"button\",{onClick:function onClick(){return auth.signOut();},children:\"Logout\"}):/*#__PURE__*/ //else, show a sign up button\n_jsxs(\"div\",{className:\"app__loginContainer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpenSignIn(true);},children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpen(true);},children:\"Sign Up\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"app__posts\",children:/*#__PURE__*/_jsx(\"div\",{className:\"app_postsRight\",children:/*loop through posts in state*/posts.map(function(_ref){var id=_ref.id,post=_ref.post;return/*#__PURE__*/ (//the key allows the page to only refresh the new post, not all the posts. since each post has its own key\n_jsx(Post,{postId:id,user:user,username:post.username,caption:post.caption,imageUrl:post.imageUrl},id));})})}),(user===null||user===void 0?void 0:user.displayName)?/*#__PURE__*/ //access only when user is signed in\n_jsx(ImageUpload,{username:user.displayName}):/*#__PURE__*/_jsx(\"h3\",{children:\"Sorry you need to login to upload\"})]});}export default App;","map":{"version":3,"sources":["/Users/okienayonoadu/beej/src/App.js"],"names":["React","useState","useEffect","logo","Post","db","auth","makeStyles","Modal","Input","ImageUpload","AccountCircleOutlinedIcon","EmailOutlinedIcon","LockOutlinedIcon","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","App","classes","modalStyle","posts","setPosts","open","setOpen","openSignIn","setOpenSignIn","username","setUsername","password","setPassword","email","setEmail","user","setUser","unsubscribe","onAuthStateChanged","authUser","console","log","displayName","updateProfile","collection","onSnapshot","snapshot","docs","map","doc","id","post","data","signUp","event","preventDefault","firebaseUser","sendEmailVerification","then","error","alert","message","createUserWithEmailAndPassword","catch","signIn","signInWithEmailAndPassword","e","target","value","signOut","caption","imageUrl"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport './App.css';\nimport logo from './beej.png';\nimport Post from './Post';\nimport {db, auth} from './firebase';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\n//import {Button} from '@material-ui/core';\nimport {Input} from '@material-ui/core';\nimport ImageUpload from './ImageUpload';\n//import VerifyEmail from './VerifyEmail';\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\nimport EmailOutlinedIcon from '@material-ui/icons/EmailOutlined';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\n\n\n/*Styling for modal. Code from material-ui.com*/\nfunction getModalStyle() {\n  const top = 50\n  const left = 50\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\n\n\nfunction App() {\n/*states...how you set variables in react*/\nconst classes = useStyles();\n// getModalStyle is not a pure function, we roll the style only on the first render\nconst [modalStyle] = useState(getModalStyle);\n\nconst [posts, setPosts] = useState([]);\nconst [open,setOpen] = useState(false);\nconst [openSignIn, setOpenSignIn] = useState(false);\nconst [username,setUsername] = useState('');\nconst [password,setPassword] = useState('');\nconst [email,setEmail] = useState('');\nconst [user,setUser] = useState(null); //state to keep track of the user\n\n\nuseEffect(() => {\n  \n    const unsubscribe = auth.onAuthStateChanged((authUser) => { //listen anytime an authentication change happens\n      if (authUser) {\n        //user has logged in...\n        console.log(authUser);  //check the console if someone is there or not\n        setUser(authUser); //Cookie tracking to keep you logged in. Captures the user in our state. \n\n        if (authUser.displayName) {\n          //dont update username if they dont have a display name\n        } else {\n          // if we just created someone...\n          return authUser.updateProfile({\n            displayName: username, //set their display name in firebase\n        });\n        }\n\n      } else {\n        // user has logged out...\n        setUser(null);\n      }\n    })\n\n    return () => {\n      //perform some cleanup actions before restarting the useEffect. This to avoid duplicate listeners.\n      unsubscribe ();\n    }\n}, [user, username]);\n\n//useEffect runs a piece of code based on a specific condition\nuseEffect(() => {\n  //this is where the code runs\n  //snapshot is a powerful listener that will run the code when a post is made\n  db.collection('posts').onSnapshot(snapshot => {\n    //everytime a new post is added, this code fires...\n    setPosts(snapshot.docs.map(doc => ({\n      id: doc.id, //the post ids\n      post: doc.data()\n    })));\n  })\n}, []);//[] symbol means run the code once\n\n//sign up function. Fired up by the button\nconst signUp = (event) => {\n  event.preventDefault(); //avoid refresh when sign up button is clicked\n\n  //verify email\n  auth.onAuthStateChanged(function (firebaseUser) {\n    if (firebaseUser) {\n      firebaseUser.sendEmailVerification().then(function() {\n        // Email sent.\n        //alert(\"Your email verification code has been sent\")\n      }, function(error) {\n        // An error happened.\n       alert(error.message)\n      })\n\n    } else {\n      \n    }\n});\n\n\nauth\n    .createUserWithEmailAndPassword(email, password)  //create user\n    .then((authUser) => {\n    return authUser.user.updateProfile({\n    displayName: username\n    })  \n  }\n\n  )\n  //backend validation is done by firebase\n  .catch((error) => alert(error.message)) //alert of any errors with a message\n\n  setOpen(false); //close modal after signing up\n\n  \n}\n\n\n//sign in function. Fired up by the button\nconst signIn = (event) => {\n  event.preventDefault(); //avoid refresh when sign in button is clicked\n\n  \n  auth\n  .signInWithEmailAndPassword(email, password)\n  //backend validation is done by firebase\n  .catch((error) => alert(error.message)) //alert of any errors with a message\n  \n  setOpenSignIn(false); //close modal after signing in\n}\n\n\n\n  return (\n    <div className=\"app\">\n      {/*using BEM naming convetion*/}\n      \n      <Modal //Sign up Modal\n        open = {open} //state to keep track if its open\n        onClose={() => setOpen(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className= \"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"50px\"\n                height=\"50px\"\n              />\n            </center>\n            \n            <AccountCircleOutlinedIcon/>\n            <Input \n                placeholder = \"username\"\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n              />\n              <EmailOutlinedIcon/>\n              <Input \n                placeholder = \"email\"\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n              <LockOutlinedIcon/>\n              <Input \n                placeholder = \"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              <button type=\"submit\" onClick={signUp}>Sign Up</button>\n              \n          </form>\n        </div>\n      </Modal>\n  \n\n      <Modal //Sign Out and Login Modal\n        open = {openSignIn} //state to keep track if its open\n        onClose={() => setOpenSignIn(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className= \"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"50px\"\n                height=\"50px\"\n              />\n            </center>\n            \n            <EmailOutlinedIcon/>\n              <Input \n                placeholder = \"email\"\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n              \n              <LockOutlinedIcon/>\n              <Input \n                placeholder = \"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              \n              <button type=\"submit\" onClick={signIn}>Sign In</button>\n              \n          </form>\n        </div>\n      </Modal>\n\n      <div className=\"app__header\">\n        <img\n          className=\"app__headerImage\"\n          src={logo}\n          alt=\"\"\n          width=\"50px\"\n          height=\"50px\"\n        />\n        {user?.displayName? ( //if the user exists, show a Logout button\n        <button onClick={() => auth.signOut()}>Logout</button>\n      ):  ( //else, show a sign up button\n          <div className=\"app__loginContainer\">\n        <button onClick={() => setOpenSignIn(true)}>Sign In</button>\n        <button onClick={() => setOpen(true)}>Sign Up</button>\n        </div>\n      )}\n        </div>\n\n      \n      <div className=\"app__posts\">\n        <div className= \"app_postsRight\">\n      {/*Posts*/}\n      {\n        /*loop through posts in state*/\n        posts.map(({id, post}) => (\n          //the key allows the page to only refresh the new post, not all the posts. since each post has its own key\n          <Post key={id} postId={id} user= {user} username={post.username} caption={post.caption} imageUrl={post.imageUrl}></Post>\n\n        ))\n      }\n      </div>\n      </div>\n        \n       {user?.displayName ?(//access only when user is signed in\n        <ImageUpload username={user.displayName} />\n      ):\n      (\n          <h3>Sorry you need to login to upload</h3>\n      )}\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}