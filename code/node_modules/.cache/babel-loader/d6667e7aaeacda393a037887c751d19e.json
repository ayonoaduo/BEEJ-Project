{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/okienayonoadu/beej copy 2/src/UserProfile.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './Home.css';\nimport logo from './beej.png'; //import Post from './Post';\n//import RecoverAccount from './RecoverAccount';\n\nimport { db, auth } from './firebase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal'; //import {Button} from '@material-ui/core';\n\nimport { Input } from '@material-ui/core'; //import ImageUpload from './ImageUpload';\n//import VerifyEmail from './VerifyEmail';\n\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\nimport EmailOutlinedIcon from '@material-ui/icons/EmailOutlined';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport HomeOutlinedIcon from '@material-ui/icons/HomeOutlined';\nimport AddBoxOutlinedIcon from '@material-ui/icons/AddBoxOutlined';\nimport NotificationsNoneOutlinedIcon from '@material-ui/icons/NotificationsNoneOutlined';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport { Link, withRouter } from 'react-router-dom';\nimport firebase from \"firebase\";\nimport { storage } from './firebase';\nimport './ImageUpload.css';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select'; //import Button from '@material-ui/core/Button';\n\nimport './Post.css';\nimport Avatar from \"@material-ui/core/Avatar\";\n/*Styling for modal. Code from material-ui.com*/\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction UserProfile() {\n  _s();\n\n  /*states...how you set variables in react*/\n  const classes = useStyles(); // getModalStyle is not a pure function, we roll the style only on the first render\n\n  const [modalStyle] = useState(getModalStyle);\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const [user, setUser] = useState(null); //state to keep track of the user\n  //IMAGE UPLOAD STATES\n\n  const [openP, setOpenP] = useState(false);\n  const [caption, setCaption] = useState('');\n  const [image, setImage] = useState(null); //state for the progress bar\n\n  const [progress, setProgress] = useState(0);\n  const [keyword, setKeyword] = React.useState('');\n  const [openDropDown, setOpenDropDown] = React.useState(false);\n\n  const handleChangeDropDown = event => {\n    setKeyword(event.target.value);\n  };\n\n  const handleCloseDropDown = () => {\n    setOpenDropDown(false);\n  };\n\n  const handleOpenDropDown = () => {\n    setOpenDropDown(true);\n  }; //imageupload functions\n\n\n  const handleChange = e => {\n    //handleChange function fires off an event\n    if (e.target.files[0]) {\n      //get the first file you selected\n      setImage(e.target.files[0]); //set the image in state to that file\n    }\n  };\n\n  const handleUpload = event => {\n    event.preventDefault(); //avoid refresh when upload button is clicked\n\n    let userr = firebase.auth().currentUser; //const id = uuid.v4()\n    //access the storage in firebase, get a references to the folder images/ and store image there\n\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\"state_changed\",\n    /*provide snapshot of the image uploading progress via an equation*/\n    snapshot => {\n      //progress function ...\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      //error function ..\n      console.log(error);\n      alert(error.message);\n    }, () => {\n      // complete function ...\n      storage.ref(\"images\").child(image.name).getDownloadURL() //GET DOWNLOAD LINK TO THE IMAGE\n      .then(url => {\n        //post image inside db\n        db.collection(\"posts\").add({\n          //get server timestamp so images are sorted by time posted\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n          caption: caption,\n          imageUrl: url,\n          username: user.displayName,\n          keyword: keyword,\n          uid: userr.uid //id: id\n\n        });\n        setProgress(0); //reset progress\n\n        setCaption(\"\");\n        setImage(null);\n        setKeyword(\"\");\n      });\n    }); //  setOpenP(false); //close modal after upload\n  };\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(authUser => {\n      //listen anytime an authentication change happens\n      if (authUser) {\n        //user has logged in...\n        console.log(authUser); //check the console if someone is there or not\n\n        setUser(authUser); //Cookie tracking to keep you logged in. Captures the user in our state. \n\n        if (authUser.displayName) {//dont update username if they dont have a display name\n        } else {\n          // if we just created someone...\n          return authUser.updateProfile({\n            displayName: username //set their display name in firebase\n\n          });\n        }\n      } else {\n        // user has logged out...\n        setUser(null);\n      }\n    });\n    return () => {\n      //perform some cleanup actions before restarting the useEffect. This to avoid duplicate listeners.\n      unsubscribe();\n    };\n  }, [user, username]); //useEffect runs a piece of code based on a specific condition\n\n  useEffect(() => {\n    //this is where the code runs\n    //snapshot is a powerful listener that will run the code when a post is made\n    db.collection('posts').where('username', '==', 'Samuel12').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n      //everytime a new post is added, this code fires...\n      setPosts(snapshot.docs.map(doc => ({\n        id: doc.id,\n        //the post ids\n        post: doc.data()\n      })));\n    });\n  }, []); //[] symbol means run the code once\n  //sign up function. Fired up by the button\n\n  const signUp = event => {\n    event.preventDefault(); //avoid refresh when sign up button is clicked\n    //verify email\n\n    auth.onAuthStateChanged(function (firebaseUser) {\n      if (firebaseUser) {\n        firebaseUser.sendEmailVerification().then(function () {// Email sent.\n          //alert(\"Your email verification code has been sent\")\n        }, function (error) {\n          // An error happened.\n          alert(error.message);\n        });\n      } else {}\n    });\n    auth.createUserWithEmailAndPassword(email, password) //create user\n    .then(authUser => {\n      return authUser.user.updateProfile({\n        displayName: username\n      });\n    }) //backend validation is done by firebase\n    .catch(error => alert(error.message)); //alert of any errors with a message\n\n    setOpen(false); //close modal after signing up\n  }; //sign in function. Fired up by the button\n\n\n  const signIn = event => {\n    event.preventDefault(); //avoid refresh when sign in button is clicked\n\n    auth.signInWithEmailAndPassword(email, password) //backend validation is done by firebase\n    .catch(error => alert(error.message)); //alert of any errors with a message\n\n    setOpenSignIn(false); //close modal after signing in\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(Modal //Sign up Modal\n    , {\n      open: open //state to keep track if its open\n      ,\n      onClose: () => setOpen(false) //onClose method. closes the model when anywhere else on the screen is clicked\n      ,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: modalStyle,\n        className: classes.paper,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"app__signup\",\n          children: [/*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"app__headerImage\",\n              src: logo,\n              alt: \"\",\n              width: \"50px\",\n              height: \"50px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AccountCircleOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"username\",\n            type: \"text\",\n            value: username,\n            onChange: e => setUsername(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(EmailOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"email\",\n            type: \"text\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"password\",\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            onClick: signUp,\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal //Sign Out and Login Modal\n    , {\n      open: openSignIn //state to keep track if its open\n      ,\n      onClose: () => setOpenSignIn(false) //onClose method. closes the model when anywhere else on the screen is clicked\n      ,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: modalStyle,\n        className: classes.paper,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"app__signup\",\n          children: [/*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"app__headerImage\",\n              src: logo,\n              alt: \"\",\n              width: \"50px\",\n              height: \"50px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(EmailOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"email\",\n            type: \"text\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"password\",\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            onClick: signIn,\n            children: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: openP //state to keep track if its open\n      ,\n      onClose: () => setOpenP(false) //onClose method. closes the model when anywhere else on the screen is clicked\n      ,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: modalStyle,\n        className: classes.paper,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"imageupload\",\n          children: [/*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"app__headerImage\",\n              src: logo,\n              alt: \"\",\n              width: \"50px\",\n              height: \"50px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            className: classes.formControl,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"demo-controlled-open-select-label\",\n              children: \"Choose a keyword\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"demo-controlled-open-select-label\",\n              id: \"demo-controlled-open-select\",\n              open: openDropDown,\n              onClose: handleCloseDropDown,\n              onOpen: handleOpenDropDown,\n              value: keyword,\n              onChange: handleChangeDropDown,\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"\",\n                children: /*#__PURE__*/_jsxDEV(\"em\", {\n                  children: \"--Choose a keyword--\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"Pothole\",\n                children: \"Pothole\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"Water Spill\",\n                children: \"Water Spill\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"Sinkhole\",\n                children: \"Sinkhole\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Enter a caption...\",\n            onChange: event => setCaption(event.target.value),\n            value: caption\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"progress\", {\n            className: \"imageupload__progress\",\n            value: progress,\n            max: \"100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleUpload,\n            children: \"Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app__header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"app__headerImage\",\n        src: logo,\n        alt: \"\",\n        width: \"50px\",\n        height: \"50px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this), (user === null || user === void 0 ? void 0 : user.displayName) ?\n      /*#__PURE__*/\n      //if the user exists, show a Logout button\n      _jsxDEV(\"button\", {\n        onClick: () => auth.signOut(),\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this) :\n      /*#__PURE__*/\n      //else, show a sign up button\n      _jsxDEV(\"div\", {\n        className: \"app__loginContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setOpenSignIn(true),\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setOpen(true),\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app__posts\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app_postsRight\",\n        children:\n        /*loop through posts in state*/\n        posts.map(({\n          id,\n          post\n        }) =>\n        /*#__PURE__*/\n        //the key allows the page to only refresh the new post, not all the posts. since each post has its own key\n        _jsxDEV(Post, {\n          uid: post.uid,\n          postId: id,\n          user: user,\n          username: post.username,\n          caption: post.caption,\n          imageUrl: post.imageUrl,\n          keyword: post.keyword\n        }, id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this), (user === null || user === void 0 ? void 0 : user.displayName) ?\n    /*#__PURE__*/\n    //access only when user is signed in\n    _jsxDEV(\"div\", {\n      className: \"app__bottom\",\n      children: /*#__PURE__*/_jsxDEV(BottomNavigation, {\n        children: [/*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n          label: \"Home\",\n          icon: /*#__PURE__*/_jsxDEV(HomeOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 46\n          }, this),\n          component: Link,\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n          label: \"AddBox\",\n          icon: /*#__PURE__*/_jsxDEV(AddBoxOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 48\n          }, this),\n          component: Link,\n          onClick: () => setOpenP(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n          label: \"Notifications\",\n          icon: /*#__PURE__*/_jsxDEV(NotificationsNoneOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(BottomNavigationAction, {\n          label: \"Account\",\n          icon: /*#__PURE__*/_jsxDEV(AccountCircleOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 49\n          }, this),\n          component: Link,\n          to: \"/UserProfile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"h7\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 9\n    }, this) //hide nav bar when user is not signed in\n    ]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 279,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserProfile, \"i14USirscctjQq5Vtvz1ihZeE4s=\", false, function () {\n  return [useStyles];\n});\n\n_c = UserProfile;\n\nfunction Post({\n  postId,\n  uid,\n  user,\n  username,\n  caption,\n  keyword,\n  imageUrl\n}) {\n  _s2();\n\n  const [comments, setComments] = useState([]); //keep track of the comments\n\n  const [comment, setComment] = useState('');\n  useEffect(() => {\n    let unsubscribe;\n\n    if (postId) //if a post id was passed true\n      {\n        unsubscribe = db.collection(\"posts\") //access the post collection\n        .where('username', '==', user.displayName).doc(postId).collection(\"comments\").orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n          // get a snapshot listener for that comment\n          setComments(snapshot.docs.map(doc => doc.data()));\n        });\n      }\n\n    return () => {\n      unsubscribe();\n    };\n  }, [postId]); //function that submits comment into database for a specific post\n\n  const postComment = event => {\n    event.preventDefault();\n    db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n      text: comment,\n      username: user.displayName,\n      //get the user who signed in from app.js\n      timestamp: firebase.firestore.FieldValue.serverTimestamp()\n    });\n    setComment(''); //clears the box\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post__header\",\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        className: \"post__avatar\",\n        alt: username\n        /*display the first letter if no picture*/\n        ,\n        src: \"/static/images/avatar/1.jpg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"post__image\",\n      src: imageUrl,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"post__text\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 38\n      }, this), \" \", caption]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"post__text\",\n      children: [keyword, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post__comments\",\n      children: comments.map(comment =>\n      /*#__PURE__*/\n      //map through each comment\n      _jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: comment.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 14\n        }, this), \" \", comment.text]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 13\n    }, this), (user === null || user === void 0 ? void 0 : user.displayName) ?\n    /*#__PURE__*/\n    //comment box only shows if you are logged in\n    _jsxDEV(\"form\", {\n      className: \"post__commentBox\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"post__input\",\n        type: \"text\",\n        placeholder: \"Add a comment...\",\n        value: comment,\n        onChange: e => setComment(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: !comment //disable if there is no comment\n        ,\n        className: \"post__button\",\n        type: \"submit\",\n        onClick: postComment,\n        children: \" Post \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Sorry you need to login to comment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 526,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(Post, \"vDMNQUtDpjPqquTzbqtVZcuIh7s=\");\n\n_c2 = Post;\nexport default UserProfile;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserProfile\");\n$RefreshReg$(_c2, \"Post\");","map":{"version":3,"sources":["/Users/okienayonoadu/beej copy 2/src/UserProfile.js"],"names":["React","useState","useEffect","logo","db","auth","makeStyles","Modal","Input","AccountCircleOutlinedIcon","EmailOutlinedIcon","LockOutlinedIcon","BottomNavigation","HomeOutlinedIcon","AddBoxOutlinedIcon","NotificationsNoneOutlinedIcon","BottomNavigationAction","Link","withRouter","firebase","storage","InputLabel","MenuItem","FormControl","Select","Avatar","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","UserProfile","classes","modalStyle","posts","setPosts","open","setOpen","openSignIn","setOpenSignIn","username","setUsername","password","setPassword","email","setEmail","user","setUser","openP","setOpenP","caption","setCaption","image","setImage","progress","setProgress","keyword","setKeyword","openDropDown","setOpenDropDown","handleChangeDropDown","event","target","value","handleCloseDropDown","handleOpenDropDown","handleChange","e","files","handleUpload","preventDefault","userr","currentUser","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","timestamp","firestore","FieldValue","serverTimestamp","imageUrl","displayName","uid","unsubscribe","onAuthStateChanged","authUser","updateProfile","where","orderBy","onSnapshot","docs","map","doc","id","post","data","signUp","firebaseUser","sendEmailVerification","createUserWithEmailAndPassword","catch","signIn","signInWithEmailAndPassword","formControl","signOut","Post","postId","comments","setComments","comment","setComment","postComment","text"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport './Home.css';\nimport logo from './beej.png';\n//import Post from './Post';\n//import RecoverAccount from './RecoverAccount';\nimport {db, auth} from './firebase';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\n//import {Button} from '@material-ui/core';\nimport {Input} from '@material-ui/core';\n//import ImageUpload from './ImageUpload';\n//import VerifyEmail from './VerifyEmail';\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\nimport EmailOutlinedIcon from '@material-ui/icons/EmailOutlined';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\n\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport HomeOutlinedIcon from '@material-ui/icons/HomeOutlined';\nimport AddBoxOutlinedIcon from '@material-ui/icons/AddBoxOutlined';\nimport NotificationsNoneOutlinedIcon from '@material-ui/icons/NotificationsNoneOutlined';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\n\nimport {Link, withRouter} from 'react-router-dom';\n\nimport firebase from \"firebase\";\nimport {storage} from './firebase';\nimport './ImageUpload.css';\n\n\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n//import Button from '@material-ui/core/Button';\nimport './Post.css';\nimport Avatar from \"@material-ui/core/Avatar\";\n\n\n/*Styling for modal. Code from material-ui.com*/\nfunction getModalStyle() {\n  const top = 50\n  const left = 50\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\n\n\nfunction UserProfile() {\n/*states...how you set variables in react*/\nconst classes = useStyles();\n// getModalStyle is not a pure function, we roll the style only on the first render\nconst [modalStyle] = useState(getModalStyle);\n\nconst [posts, setPosts] = useState([]);\nconst [open,setOpen] = useState(false);\nconst [openSignIn, setOpenSignIn] = useState(false);\nconst [username,setUsername] = useState('');\nconst [password,setPassword] = useState('');\nconst [email,setEmail] = useState('');\nconst [user,setUser] = useState(null); //state to keep track of the user\n\n\n//IMAGE UPLOAD STATES\nconst [openP,setOpenP] = useState(false);\nconst [caption, setCaption] = useState('');\nconst [image, setImage] = useState(null); //state for the progress bar\nconst [progress, setProgress] = useState(0);\n\n\nconst [keyword, setKeyword] = React.useState('');\n  const [openDropDown, setOpenDropDown] = React.useState(false);\n\n  const handleChangeDropDown = (event) => {\n    setKeyword(event.target.value);\n  };\n\n  const handleCloseDropDown = () => {\n    setOpenDropDown(false);\n  };\n\n  const handleOpenDropDown = () => {\n    setOpenDropDown(true);\n  };\n\n\n//imageupload functions\nconst handleChange =  (e) => {//handleChange function fires off an event\n  if (e.target.files[0]) { //get the first file you selected\n      setImage(e.target.files[0]); //set the image in state to that file\n  }\n};\n\nconst handleUpload = (event) => {\n  event.preventDefault(); //avoid refresh when upload button is clicked\n\n\n\n  let userr = firebase.auth().currentUser\n  //const id = uuid.v4()\n\n\n\n\n\n  //access the storage in firebase, get a references to the folder images/ and store image there\n\n   const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    \n\n\n    uploadTask.on(\n      \"state_changed\",\n      /*provide snapshot of the image uploading progress via an equation*/\n      (snapshot) => {\n          //progress function ...\n          const progress = Math.round(\n              (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          );\n          setProgress(progress);\n      },\n      (error) => {\n          //error function ..\n          console.log(error);\n          alert(error.message);\n      },\n      () => {\n          // complete function ...\n          storage\n              .ref(\"images\")\n              .child(image.name)\n              .getDownloadURL()   //GET DOWNLOAD LINK TO THE IMAGE\n              .then(url => {\n                  //post image inside db\n                  db.collection(\"posts\").add({\n                      //get server timestamp so images are sorted by time posted\n                      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n                      caption: caption,\n                      imageUrl: url,\n                      username: user.displayName,\n                      keyword: keyword,\n                      uid: userr.uid\n                      //id: id\n                  });\n\n                  setProgress(0); //reset progress\n                  setCaption(\"\");\n                  setImage(null);\n                  setKeyword(\"\");\n              });\n      }\n  );\n\n \n//  setOpenP(false); //close modal after upload\n  \n\n  \n\n\n};\n\n\n\n\n\n\nuseEffect(() => {\n  \n    const unsubscribe = auth.onAuthStateChanged((authUser) => { //listen anytime an authentication change happens\n      if (authUser) {\n        //user has logged in...\n        console.log(authUser);  //check the console if someone is there or not\n        setUser(authUser); //Cookie tracking to keep you logged in. Captures the user in our state. \n\n        if (authUser.displayName) {\n          //dont update username if they dont have a display name\n        } else {\n          // if we just created someone...\n          return authUser.updateProfile({\n            displayName: username, //set their display name in firebase\n        });\n        }\n\n      } else {\n        // user has logged out...\n        setUser(null);\n      }\n    })\n\n    return () => {\n      //perform some cleanup actions before restarting the useEffect. This to avoid duplicate listeners.\n      unsubscribe ();\n    }\n}, [user, username]);\n\n//useEffect runs a piece of code based on a specific condition\nuseEffect(() => {\n  //this is where the code runs\n  //snapshot is a powerful listener that will run the code when a post is made\n  db.collection('posts').where('username', '==', 'Samuel12').orderBy('timestamp', 'desc').onSnapshot(snapshot => {\n    //everytime a new post is added, this code fires...\n    setPosts(snapshot.docs.map(doc => ({\n      id: doc.id, //the post ids\n      post: doc.data()\n    })));\n  })\n}, []);//[] symbol means run the code once\n\n//sign up function. Fired up by the button\nconst signUp = (event) => {\n  event.preventDefault(); //avoid refresh when sign up button is clicked\n\n  //verify email\n  auth.onAuthStateChanged(function (firebaseUser) {\n    if (firebaseUser) {\n      firebaseUser.sendEmailVerification().then(function() {\n        // Email sent.\n        //alert(\"Your email verification code has been sent\")\n      }, function(error) {\n        // An error happened.\n       alert(error.message)\n      })\n\n    } else {\n      \n    }\n});\n\n\nauth\n    .createUserWithEmailAndPassword(email, password)  //create user\n    .then((authUser) => {\n    return authUser.user.updateProfile({\n    displayName: username\n    })  \n  }\n\n  )\n  //backend validation is done by firebase\n  .catch((error) => alert(error.message)) //alert of any errors with a message\n\n  setOpen(false); //close modal after signing up\n\n  \n}\n\n\n//sign in function. Fired up by the button\nconst signIn = (event) => {\n  event.preventDefault(); //avoid refresh when sign in button is clicked\n\n  \n  auth\n  .signInWithEmailAndPassword(email, password)\n  //backend validation is done by firebase\n  .catch((error) => alert(error.message)) //alert of any errors with a message\n  \n  setOpenSignIn(false); //close modal after signing in\n}\n\n\n\n  return (\n    <div className=\"app\">\n      {/*using BEM naming convetion*/}\n\n{/* \n      {user?.displayName ?(//access only when user is signed in\n        <ImageUpload username={user.displayName} />\n      ):\n      (\n          <h7>Sorry you need to login to upload</h7>\n      )} \n */}\n\n\n\n      <Modal //Sign up Modal\n        open = {open} //state to keep track if its open\n        onClose={() => setOpen(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className= \"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"50px\"\n                height=\"50px\"\n              />\n            </center>\n            \n            <AccountCircleOutlinedIcon/>\n            <Input \n                placeholder = \"username\"\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n              />\n              <EmailOutlinedIcon/>\n              <Input \n                placeholder = \"email\"\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n              <LockOutlinedIcon/>\n              <Input \n                placeholder = \"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              <button type=\"submit\" onClick={signUp}>Sign Up</button>\n              \n          </form>\n        </div>\n      </Modal>\n  \n\n      <Modal //Sign Out and Login Modal\n        open = {openSignIn} //state to keep track if its open\n        onClose={() => setOpenSignIn(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className= \"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"50px\"\n                height=\"50px\"\n              />\n            </center>\n            \n            <EmailOutlinedIcon/>\n              <Input \n                placeholder = \"email\"\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n              \n              <LockOutlinedIcon/>\n              <Input \n                placeholder = \"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              \n              <button type=\"submit\" onClick={signIn}>Sign In</button>\n              \n          </form>\n        </div>\n      </Modal>\n\n\n{/* modal for posting*/}\n<Modal \n        open = {openP} //state to keep track if its open\n        onClose={() => setOpenP(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n        <div className=\"imageupload\">\n         \n         \n         \n        <center>\n            <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"50px\"\n                height=\"50px\"\n              />\n            </center>\n            <FormControl className={classes.formControl}>\n            \n\n        <InputLabel id=\"demo-controlled-open-select-label\">Choose a keyword</InputLabel>\n        <Select\n          labelId=\"demo-controlled-open-select-label\"\n          id=\"demo-controlled-open-select\"\n          open={openDropDown}\n          onClose={handleCloseDropDown}\n          onOpen={handleOpenDropDown}\n          value={keyword}\n          onChange={handleChangeDropDown}\n        >\n          <MenuItem value=\"\">\n            <em>--Choose a keyword--</em>\n          </MenuItem>\n          <MenuItem value={\"Pothole\"}>Pothole</MenuItem>\n          <MenuItem value={\"Water Spill\"}>Water Spill</MenuItem>\n          <MenuItem value={\"Sinkhole\"}>Sinkhole</MenuItem>\n        </Select>\n      </FormControl>\n \n\n           <input type=\"text\" placeholder='Enter a caption...' onChange={event => setCaption(event.target.value)} value={caption}/>\n           <input type=\"file\" onChange={handleChange} />\n\n           <progress className=\"imageupload__progress\" value={progress} max=\"100\"/>\n           <button onClick={handleUpload}>\n            Upload\n           </button>\n          \n        </div>\n        </div>\n        \n      </Modal>\n\n\n      <div className=\"app__header\">\n        <img\n          className=\"app__headerImage\"\n          src={logo}\n          alt=\"\"\n          width=\"50px\"\n          height=\"50px\"\n        />\n        {user?.displayName? ( //if the user exists, show a Logout button\n        <button onClick={() => auth.signOut()}>Logout</button>\n      ):  ( //else, show a sign up button\n          <div className=\"app__loginContainer\">\n        <button onClick={() => setOpenSignIn(true)}>Sign In</button>\n        <button onClick={() => setOpen(true)}>Sign Up</button>\n        </div>\n      )}\n        </div>\n\n      \n      <div className=\"app__posts\">\n        <div className= \"app_postsRight\">\n      {/*Posts*/}\n      {\n        /*loop through posts in state*/\n        posts.map(({id, post}) => (\n          //the key allows the page to only refresh the new post, not all the posts. since each post has its own key\n          <Post key={id} uid={post.uid} postId={id} user= {user} username={post.username} caption={post.caption} imageUrl={post.imageUrl} keyword={post.keyword} ></Post>\n        ))\n      }\n      </div>\n      </div>\n        \n\n\n\n{user?.displayName ?(//access only when user is signed in\n\n \n      <div className=\"app__bottom\">\n      <BottomNavigation>\n  <BottomNavigationAction label=\"Home\" icon={<HomeOutlinedIcon />} component={Link} to=\"/\" />\n  <BottomNavigationAction label=\"AddBox\" icon={<AddBoxOutlinedIcon />} component={Link} onClick={() => setOpenP(true)}/>\n  <BottomNavigationAction label=\"Notifications\" icon={<NotificationsNoneOutlinedIcon />} />\n  <BottomNavigationAction label=\"Account\" icon={<AccountCircleOutlinedIcon />} component={Link} to=\"/UserProfile\"/>\n\n</BottomNavigation>\n</div>\n     ):\n     (\n        <h7></h7> //hide nav bar when user is not signed in\n    )}\n     \n\n    </div>\n  );\n}\nfunction Post({postId, uid, user, username, caption, keyword, imageUrl}) {\n    const [comments, setComments] = useState([]); //keep track of the comments\n    const [comment, setComment] = useState('');\n    useEffect(()=>{\n      let unsubscribe;\n      if (postId) //if a post id was passed true\n      {\n        unsubscribe = db\n        .collection(\"posts\") //access the post collection\n        .where('username', '==', user.displayName)\n        .doc(postId)\n        .collection(\"comments\")\n        .orderBy('timestamp', 'desc')\n        .onSnapshot((snapshot) => { // get a snapshot listener for that comment\n          setComments(snapshot.docs.map((doc) => doc.data())); \n        });\n    }\n  \n    return () => {\n      unsubscribe();\n    };\n    },\n    [postId]);\n  \n    //function that submits comment into database for a specific post\n    const postComment = (event) => {\n      event.preventDefault();\n  \n      db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n        text: comment,\n        username: user.displayName,  //get the user who signed in from app.js\n        timestamp: firebase.firestore.FieldValue.serverTimestamp()\n      });\n      setComment(''); //clears the box\n    }\n  \n  \n      return (\n        <div className=\"post\">\n  \n          {/*header -> avatar + username */}\n          <div className=\"post__header\">\n          <Avatar\n              className=\"post__avatar\"\n              alt={username} /*display the first letter if no picture*/\n              src=\"/static/images/avatar/1.jpg\"\n              />\n          <h3>{username}</h3>\n          </div>\n  \n          {/*image*/}\n          <img className=\"post__image\" src={imageUrl} alt=\"\"></img>\n            \n          {/* username + caption */}\n          <h4 className=\"post__text\"><strong>{username}</strong> {caption}</h4>\n  {/*         \n          keyword */}\n          <h4 className=\"post__text\">{keyword} </h4>\n          \n          \n            <div className=\"post__comments\"> \n            {comments.map((comment) => (//map through each comment\n            <p>\n             <strong>{comment.username}</strong> {comment.text}\n            </p>\n            ))}\n          </div>\n  \n  \n          {user?.displayName? ( //comment box only shows if you are logged in\n        <form className=\"post__commentBox\"> \n        <input\n            className=\"post__input\"\n            type=\"text\"\n            placeholder=\"Add a comment...\"\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n        />\n        <button\n          disabled={!comment} //disable if there is no comment\n          className=\"post__button\"\n          type=\"submit\"\n          onClick={postComment}\n          > Post </button>\n      </form>\n          ):\n          (\n            <h3>Sorry you need to login to comment</h3>\n        )\n          }    \n        </div>\n      )\n  }\nexport default UserProfile;"]},"metadata":{},"sourceType":"module"}