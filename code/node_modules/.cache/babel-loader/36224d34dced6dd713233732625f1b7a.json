{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/okienayonoadu/beej copy 2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';//import {Button} from '@material-ui/core';\nimport firebase from\"firebase\";import logo from'./beej.png';import{storage,db}from'./firebase';import Modal from'@material-ui/core/Modal';import{makeStyles}from'@material-ui/core/styles';import'./ImageUpload.css';/*Styling for modal. Code from material-ui.com*/function getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}var useStyles=makeStyles(function(theme){return{paper:{position:'absolute',width:400,backgroundColor:theme.palette.background.paper,border:'2px solid #000',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});function ImageUpload(_ref){var username=_ref.username;var classes=useStyles();// getModalStyle is not a pure function, we roll the style only on the first render\nvar _useState=useState(getModalStyle),_useState2=_slicedToArray(_useState,1),modalStyle=_useState2[0];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openImg=_useState6[0],setOpenImg=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),caption=_useState8[0],setCaption=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),image=_useState10[0],setImage=_useState10[1];//state for the progress bar\nvar _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),progress=_useState12[0],setProgress=_useState12[1];var handleChange=function handleChange(e){//handleChange function fires off an event\nif(e.target.files[0]){//get the first file you selected\nsetImage(e.target.files[0]);//set the image in state to that file\n}};var handleUpload=function handleUpload(){//access the storage in firebase, get a references to the folder images/ and store image there\nvar uploadTask=storage.ref(\"images/\".concat(image.name)).put(image);uploadTask.on(\"state_changed\",/*provide snapshot of the image uploading progress via an equation*/function(snapshot){//progress function ...\nvar progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);setProgress(progress);},function(error){//error function ..\nconsole.log(error);alert(error.message);},function(){// complete function ...\nstorage.ref(\"images\").child(image.name).getDownloadURL()//GET DOWNLOAD LINK TO THE IMAGE\n.then(function(url){//post image inside db\ndb.collection(\"posts\").add({//get server timestamp so images are sorted by time posted\ntimestamp:firebase.firestore.FieldValue.serverTimestamp(),caption:caption,imageUrl:url,username:username});setProgress(0);//reset progress\nsetCaption(\"\");setImage(null);});});};return/*#__PURE__*/_jsx(Modal//Sign up Modal\n,{open:openImg//state to keep track if its open\n,onClose:function onClose(){return setOpenImg(false);}//onClose method. closes the model when anywhere else on the screen is clicked\n,children:/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{className:\"app__signup\",children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"app__headerImage\",src:logo,alt:\"\",width:\"50px\",height:\"50px\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"imageupload\",children:[/*#__PURE__*/_jsx(\"progress\",{className:\"imageupload__progress\",value:progress,max:\"100\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter a caption...\",onChange:function onChange(event){return setCaption(event.target.value);},value:caption}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,children:\"Upload\"})]})]})})});}export default ImageUpload;","map":{"version":3,"sources":["/Users/okienayonoadu/beej copy 2/src/ImageUpload.js"],"names":["React","useState","firebase","logo","storage","db","Modal","makeStyles","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","ImageUpload","username","classes","modalStyle","open","setOpen","openImg","setOpenImg","caption","setCaption","image","setImage","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","timestamp","firestore","FieldValue","serverTimestamp","imageUrl","event","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\n//import {Button} from '@material-ui/core';\nimport firebase from \"firebase\";\nimport logo from './beej.png';\nimport {storage, db} from './firebase';\nimport Modal from '@material-ui/core/Modal';\nimport {makeStyles} from '@material-ui/core/styles';\nimport './ImageUpload.css';\n\n/*Styling for modal. Code from material-ui.com*/\nfunction getModalStyle() {\n    const top = 50\n    const left = 50\n  \n    return {\n      top: `${top}%`,\n      left: `${left}%`,\n      transform: `translate(-${top}%, -${left}%)`,\n    };\n  }\n  const useStyles = makeStyles((theme) => ({\n    paper: {\n      position: 'absolute',\n      width: 400,\n      backgroundColor: theme.palette.background.paper,\n      border: '2px solid #000',\n      boxShadow: theme.shadows[5],\n      padding: theme.spacing(2, 4, 3),\n    },\n  }));\n  \n\n\nfunction ImageUpload({username}) {\n    const classes = useStyles();\n    // getModalStyle is not a pure function, we roll the style only on the first render\n    const [modalStyle] = useState(getModalStyle);\n    const [open,setOpen] = useState(false);\n    const [openImg, setOpenImg] = useState(false);\n    const [caption, setCaption] = useState('');\n    const [image, setImage] = useState(null); //state for the progress bar\n    const [progress, setProgress] = useState(0);\n   \n    \n\n    const handleChange =  (e) => {//handleChange function fires off an event\n        if (e.target.files[0]) { //get the first file you selected\n            setImage(e.target.files[0]); //set the image in state to that file\n        }\n    };\n\n    const handleUpload = () => {\n        //access the storage in firebase, get a references to the folder images/ and store image there\n        const uploadTask = storage.ref(`images/${image.name}`).put(image);\n\n        uploadTask.on(\n            \"state_changed\",\n            /*provide snapshot of the image uploading progress via an equation*/\n            (snapshot) => {\n                //progress function ...\n                const progress = Math.round(\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n                );\n                setProgress(progress);\n            },\n            (error) => {\n                //error function ..\n                console.log(error);\n                alert(error.message);\n            },\n            () => {\n                // complete function ...\n                storage\n                    .ref(\"images\")\n                    .child(image.name)\n                    .getDownloadURL()   //GET DOWNLOAD LINK TO THE IMAGE\n                    .then(url => {\n                        //post image inside db\n                        db.collection(\"posts\").add({\n                            //get server timestamp so images are sorted by time posted\n                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n                            caption: caption,\n                            imageUrl: url,\n                            username: username\n                        });\n\n                        setProgress(0); //reset progress\n                        setCaption(\"\");\n                        setImage(null);\n                    });\n            }\n        );\n    };\n\n    return (\n        \n        \n        \n        <Modal //Sign up Modal\n        open = {openImg} //state to keep track if its open\n        onClose={() => setOpenImg(false)} //onClose method. closes the model when anywhere else on the screen is clicked\n      >\n        <div style={modalStyle} className={classes.paper}>\n          <form className= \"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src={logo}\n                alt=\"\"\n                width=\"50px\"\n                height=\"50px\"\n              />\n            </center>\n            \n            <div className=\"imageupload\">\n        <progress className=\"imageupload__progress\" value={progress} max=\"100\"/>\n           <input type=\"text\" placeholder='Enter a caption...' onChange={event => setCaption(event.target.value)} value={caption}/>\n           <input type=\"file\" onChange={handleChange} />\n           <button onClick={handleUpload}>Upload</button>\n            </div>\n              \n          </form>\n        </div>\n      </Modal>      \n    )\n}\n\nexport default ImageUpload"]},"metadata":{},"sourceType":"module"}