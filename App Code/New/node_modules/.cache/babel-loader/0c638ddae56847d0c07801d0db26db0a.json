{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/okienayonoadu/beej/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{db}from'./firebase';import'./Post.css';import Avatar from\"@material-ui/core/Avatar\";import firebase from'firebase';function Post(_ref){var postId=_ref.postId,user=_ref.user,username=_ref.username,caption=_ref.caption,imageUrl=_ref.imageUrl;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];//keep track of the comments\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];useEffect(function(){var unsubscribe;if(postId)//if a post id was passed true\n{unsubscribe=db.collection(\"posts\")//access the post collection\n.doc(postId).collection(\"comments\").orderBy('timestamp','desc').onSnapshot(function(snapshot){// get a snapshot listener for that comment\nsetComments(snapshot.docs.map(function(doc){return doc.data();}));});}return function(){unsubscribe();};},[postId]);//function that submits comment into database for a specific post\nvar postComment=function postComment(event){event.preventDefault();db.collection(\"posts\").doc(postId).collection(\"comments\").add({text:comment,username:user.displayName,//get the user who signed in from app.js\ntimestamp:firebase.firestore.FieldValue.serverTimestamp()});setComment('');//clears the box\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__header\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"post__avatar\",alt:username/*display the first letter if no picture*/,src:\"/static/images/avatar/1.jpg\"}),/*#__PURE__*/_jsx(\"h3\",{children:username})]}),/*#__PURE__*/_jsx(\"img\",{className:\"post__image\",src:imageUrl,alt:\"\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"post__text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:username}),\" \",caption]}),/*#__PURE__*/_jsx(\"div\",{className:\"post__comments\",children:comments.map(function(comment){return/*#__PURE__*/ (//map through each comment\n_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:comment.username}),\" \",comment.text]}));})}),(user===null||user===void 0?void 0:user.displayName)?/*#__PURE__*/ //comment box only shows if you are logged in\n_jsxs(\"form\",{className:\"post__commentBox\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"post__input\",type:\"text\",placeholder:\"Add a comment...\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{disabled:!comment//disable if there is no comment\n,className:\"post__button\",type:\"submit\",onClick:postComment,children:\" Post \"})]}):/*#__PURE__*/_jsx(\"h3\",{children:\"Sorry you need to login to comment\"})]});}export default Post;","map":{"version":3,"sources":["/Users/okienayonoadu/beej/src/Post.js"],"names":["React","useState","useEffect","db","Avatar","firebase","Post","postId","user","username","caption","imageUrl","comments","setComments","comment","setComment","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","postComment","event","preventDefault","add","text","displayName","timestamp","firestore","FieldValue","serverTimestamp","e","target","value"],"mappings":"oMAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAASC,EAAT,KAAmB,YAAnB,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CAEA,QAASC,CAAAA,IAAT,MAA2D,IAA5CC,CAAAA,MAA4C,MAA5CA,MAA4C,CAApCC,IAAoC,MAApCA,IAAoC,CAA9BC,QAA8B,MAA9BA,QAA8B,CAApBC,OAAoB,MAApBA,OAAoB,CAAXC,QAAW,MAAXA,QAAW,eACzBV,QAAQ,CAAC,EAAD,CADiB,wCAClDW,QADkD,eACxCC,WADwC,eACX;AADW,eAE3BZ,QAAQ,CAAC,EAAD,CAFmB,yCAElDa,OAFkD,eAEzCC,UAFyC,eAGzDb,SAAS,CAAC,UAAI,CACZ,GAAIc,CAAAA,WAAJ,CACA,GAAIT,MAAJ,CAAY;AACZ,CACES,WAAW,CAAGb,EAAE,CACfc,UADa,CACF,OADE,CACO;AADP,CAEbC,GAFa,CAETX,MAFS,EAGbU,UAHa,CAGF,UAHE,EAIbE,OAJa,CAIL,WAJK,CAIQ,MAJR,EAKbC,UALa,CAKF,SAACC,QAAD,CAAc,CAAE;AAChCR,WAAW,CAACQ,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAASA,CAAAA,GAAG,CAACM,IAAJ,EAAT,EAAlB,CAAD,CAAX,CACK,CAPa,CAAd,CAQH,CAED,MAAO,WAAM,CACXR,WAAW,GACZ,CAFD,CAGC,CAjBQ,CAkBT,CAACT,MAAD,CAlBS,CAAT,CAoBA;AACA,GAAMkB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC7BA,KAAK,CAACC,cAAN,GAEAxB,EAAE,CAACc,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BX,MAA3B,EAAmCU,UAAnC,CAA8C,UAA9C,EAA0DW,GAA1D,CAA8D,CAC5DC,IAAI,CAAEf,OADsD,CAE5DL,QAAQ,CAAED,IAAI,CAACsB,WAF6C,CAE/B;AAC7BC,SAAS,CAAE1B,QAAQ,CAAC2B,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EAHiD,CAA9D,EAKAnB,UAAU,CAAC,EAAD,CAAV,CAAgB;AACjB,CATD,CAYE,mBACE,aAAK,SAAS,CAAC,MAAf,wBAGE,aAAK,SAAS,CAAC,cAAf,wBACA,KAAC,MAAD,EACI,SAAS,CAAC,cADd,CAEI,GAAG,CAAEN,QAAU,0CAFnB,CAGI,GAAG,CAAC,6BAHR,EADA,cAMA,oBAAKA,QAAL,EANA,GAHF,cAaE,YAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,CAAEE,QAAlC,CAA4C,GAAG,CAAC,EAAhD,EAbF,cAgBE,YAAI,SAAS,CAAC,YAAd,wBAA2B,wBAASF,QAAT,EAA3B,KAAwDC,OAAxD,GAhBF,cAoBI,YAAK,SAAS,CAAC,gBAAf,UACCE,QAAQ,CAACW,GAAT,CAAa,SAACT,OAAD,sBAAc;AAC5B,kCACC,wBAASA,OAAO,CAACL,QAAjB,EADD,KACsCK,OAAO,CAACe,IAD9C,GADc,GAAb,CADD,EApBJ,CA6BG,CAAArB,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEsB,WAAN,gBAAqB;AACxB,cAAM,SAAS,CAAC,kBAAhB,wBACA,cACI,SAAS,CAAC,aADd,CAEI,IAAI,CAAC,MAFT,CAGI,WAAW,CAAC,kBAHhB,CAII,KAAK,CAAEhB,OAJX,CAKI,QAAQ,CAAE,kBAACqB,CAAD,QAAOpB,CAAAA,UAAU,CAACoB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB,EALd,EADA,cAQA,eACE,QAAQ,CAAE,CAACvB,OAAS;AADtB,CAEE,SAAS,CAAC,cAFZ,CAGE,IAAI,CAAC,QAHP,CAIE,OAAO,CAAEW,WAJX,oBARA,GADG,cAkBC,0DA/CJ,GADF,CAuDH,CAED,cAAenB,CAAAA,IAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { db } from './firebase';\nimport './Post.css';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport firebase from 'firebase';\n\nfunction Post({postId, user, username, caption, imageUrl}) {\n  const [comments, setComments] = useState([]); //keep track of the comments\n  const [comment, setComment] = useState('');\n  useEffect(()=>{\n    let unsubscribe;\n    if (postId) //if a post id was passed true\n    {\n      unsubscribe = db\n      .collection(\"posts\") //access the post collection\n      .doc(postId)\n      .collection(\"comments\")\n      .orderBy('timestamp', 'desc')\n      .onSnapshot((snapshot) => { // get a snapshot listener for that comment\n\t\tsetComments(snapshot.docs.map((doc) => doc.data())); \n      });\n  }\n\n  return () => {\n    unsubscribe();\n  };\n  },\n  [postId]);\n\n  //function that submits comment into database for a specific post\n  const postComment = (event) => {\n    event.preventDefault();\n\n    db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n      text: comment,\n      username: user.displayName,  //get the user who signed in from app.js\n      timestamp: firebase.firestore.FieldValue.serverTimestamp()\n    });\n    setComment(''); //clears the box\n  }\n\n\n    return (\n      <div className=\"post\">\n\n        {/*header -> avatar + username */}\n        <div className=\"post__header\">\n        <Avatar\n            className=\"post__avatar\"\n            alt={username} /*display the first letter if no picture*/\n            src=\"/static/images/avatar/1.jpg\"\n            />\n        <h3>{username}</h3>\n        </div>\n\n        {/*image*/}\n        <img className=\"post__image\" src={imageUrl} alt=\"\"></img>\n          \n        {/* username + caption */}\n        <h4 className=\"post__text\"><strong>{username}</strong> {caption}</h4>\n        \n        \n        \n          <div className=\"post__comments\"> \n          {comments.map((comment) => (//map through each comment\n          <p>\n           <strong>{comment.username}</strong> {comment.text}\n          </p>\n          ))}\n        </div>\n\n\n        {user?.displayName? ( //comment box only shows if you are logged in\n      <form className=\"post__commentBox\"> \n      <input\n          className=\"post__input\"\n          type=\"text\"\n          placeholder=\"Add a comment...\"\n          value={comment}\n          onChange={(e) => setComment(e.target.value)}\n      />\n      <button\n        disabled={!comment} //disable if there is no comment\n        className=\"post__button\"\n        type=\"submit\"\n        onClick={postComment}\n        > Post </button>\n    </form>\n        ):\n        (\n          <h3>Sorry you need to login to comment</h3>\n      )\n        }\n\n      \n      </div>\n    )\n}\n\nexport default Post\n"]},"metadata":{},"sourceType":"module"}